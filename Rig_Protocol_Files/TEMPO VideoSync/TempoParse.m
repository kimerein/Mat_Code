function [commandLines, remainder] = TempoParse(stream)% Function accepts a stream of characters received from TEMPO, and calls% within the scope of the function calling TempoParse the functions within% the input stream.% If the final command in the input stream is incomplete, then we return% in remainder all of the characters following the last complete command in the% stream.% 5/11/00, Allen Ingling wrote it.% 3/22/06, Daniel Shima, no modifications necessary for OSX.% Break stream into strings of single commands, find remainder.  Semicolons mark the% end of a command.streamLen = length(stream);if (streamLen ~= 0)    endNdxs = find(stream == ';');    if ~isempty(endNdxs);        numCommands = length(endNdxs);        lastEnd = endNdxs(numCommands);        if (lastEnd < streamLen)            remainder = stream((lastEnd + 1):streamLen);        else            remainder = '';        end        commandLines = {};        startNdxs = [1 (endNdxs(1:numCommands - 1) + 1)];        for i = 1:numCommands            commandLines{i} = stream(startNdxs(i):endNdxs(i));        end    else        remainder = stream;        commandLines = '';    endelse    commandLines = '';    remainder = '';end